import{r as u,h as o,H as b,g as f}from"./preview-BLkU8-7b.js";import{g as i}from"./index-2dc281eb-DCayfYZh.js";import{c as l}from"./index-2c945920-BNEorLC5.js";import{a}from"./raf-ac8923ee-Dje82vI4.js";import{t as m}from"./throttle-552e88ff-BILzQ6sF.js";import"./isObject-f305a0d7-CA5ssx5i.js";import"./jsx-runtime-qGIIFXMu.js";import"./index-CDs2tPxN.js";import"./iframe-BYgjunmg.js";import"../sb-preview/runtime.js";import"./tslib.es6-pJfR_DrR.js";import"./isSymbol-385885b1-CYoGKoqs.js";const p=':host,::slotted(*),*{box-sizing:border-box}:host([disabled]){cursor:not-allowed !important;}:host([disabled]) *,:host([disabled]) ::slotted(*){cursor:not-allowed !important;pointer-events:none !important;}:host{display:flex;flex-grow:1}.content{display:flex;flex:1;flex-flow:row nowrap;gap:var(--button-group-spacing)}:host([alignment="right"]) .content{flex-direction:row-reverse}:host([alignment="left"]) .content{justify-content:flex-start}:host([alignment="split"]) .content{flex-direction:row-reverse;justify-content:flex-end}:host([alignment="split"]) .content ::slotted(.market-button:first-of-type){margin-left:auto}:host([alignment="fill"]) .content{flex-direction:row-reverse}:host([alignment="fill"]) .content ::slotted(.market-button){flex:1}:host([alignment="stack"]) .content{flex-direction:column}[slot="content"]{display:flex;flex-direction:column;gap:var(--button-group-spacing)}::slotted([slot="overflow-buttons"]){width:100%}',g=p,v=2,_=48,w=16,y=class{constructor(t){u(this,t),this._buttonEls=[],this._observers={},this.throttledHandleResize=m(this.handleResize.bind(this),w),this.alignment="right",this.popoverStrategy="absolute",this._sortedButtonEls={overflow:[],visible:[]}}getComputedWidth(t){return Number.parseFloat(window.getComputedStyle(t).width)}async findButtonCutoffIndex(){if(this.alignment==="stack")return this._buttonEls.length;const t=this.getComputedWidth(this.el),e=document.createElement("div");e.style.width="auto",e.style.position="absolute",e.style.visibility="hidden",this.el.shadowRoot.appendChild(e);let s=0,n=0;for(const d of this._buttonEls){if(s===v)break;const h=s+1===this._buttonEls.length?0:l.BUTTON_GROUP_SPACING+_,r=d.cloneNode(!0);r.style.display="block",e.appendChild(r),await a();const c=this.getComputedWidth(e);if(e.removeChild(r),n+=(s>0?l.BUTTON_GROUP_SPACING:0)+c,n+h>=t)break;++s}return this.el.shadowRoot.removeChild(e),e.remove(),s}sortVisibleAndOverflowButtons(){this._sortedButtonEls={visible:this._buttonEls.slice(0,this._buttonCutoffIndex),overflow:this._buttonEls.slice(this._buttonCutoffIndex)},this._sortedButtonEls.visible.forEach(t=>{t.getAttribute("slot")==="overflow-buttons"&&t.removeAttribute("slot")}),this._sortedButtonEls.overflow.forEach(t=>{t.getAttribute("slot")!=="overflow-buttons"&&t.setAttribute("slot","overflow-buttons")})}async handleResize(){if(!this.getComputedWidth(this.el))return;const t=await this.findButtonCutoffIndex();t!==this._buttonCutoffIndex&&(this._buttonCutoffIndex=t,await a(),this.sortVisibleAndOverflowButtons()),this.el.style.visibility=""}registerSlottedButtons(){const t=i("market-button");this._buttonEls=[...this.el.querySelectorAll(t)]}observeContent(t){this._observers.content||(this._observers.content=new ResizeObserver(this.throttledHandleResize),this._observers.content.observe(t))}connectedCallback(){this._observers.host||(this._observers.host=new ResizeObserver(this.throttledHandleResize),this._observers.host.observe(this.el))}componentWillLoad(){this.el.style.visibility="hidden",this.registerSlottedButtons(),this.handleResize()}disconnectedCallback(){Object.entries(this._observers).forEach(([t,e])=>{e&&(e.disconnect(),this._observers[t]=void 0)})}render(){const t=i("market-button-dropdown"),e=i("market-button"),s=i("market-icon");return o(b,{key:"0057bde7c5189dc71782960ea6a0a05ab850ffae",class:"market-button-group"},o("div",{key:"bb2bae68c3f6bcce4a467153493c54e5bf74a8d8",class:"content",ref:n=>this.observeContent(n)},o("slot",{key:"aa97b649151b3dae1d6f98b07b55ebd5b59124a8",onSlotchange:()=>this.registerSlottedButtons()}),this._sortedButtonEls.overflow.length>0&&o(t,{key:"ed1403f69d8bdf9a2b177ab7d16274e78cd1c3bf","no-caret":!0,"popover-strategy":this.popoverStrategy},o(e,{key:"633ade9faa3248a77fe539d03c3593778ce2647f",slot:"trigger"},o(s,{key:"61a4cf7a55a68750d827d9950232a564e1664150",slot:"icon",name:l.BUTTON_GROUP_OVERFLOW_BUTTON_ICON_ASSET})),o("div",{key:"1e30bc26ee0d90bbd1ca0324d7054d74beea088e",slot:"content"},o("slot",{key:"f02cea12d210b2170d13c14a10ac8027360cc445",name:"overflow-buttons",slot:"overflow-buttons"})))))}get el(){return f(this)}};y.style=g;export{y as market_button_group};
