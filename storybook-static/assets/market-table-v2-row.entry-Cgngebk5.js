import{r as c,c as s,h as l,H as h,g}from"./preview-BLkU8-7b.js";import{g as n}from"./index-2dc281eb-DCayfYZh.js";import{D as v}from"./draggable-3c5539a5-C1SC_K6H.js";import"./jsx-runtime-qGIIFXMu.js";import"./index-CDs2tPxN.js";import"./iframe-BYgjunmg.js";import"../sb-preview/runtime.js";import"./tslib.es6-pJfR_DrR.js";import"./max-z-index-7a974719-43GcVZqA.js";import"./raf-ac8923ee-Dje82vI4.js";const m=':host,*{box-sizing:border-box}:host{--table-cell-border-width:1px;--table-cell-border-color:var(--core-divider-20-color);--table-cell-horizontal-spacing:var(--core-metrics-spacing-150);--table-cell-heading-border-color:var(--core-divider-10-color);--table-cell-heading-font-weight:var(--core-type-medium-weight);--table-cell-state-normal-background-color:var(--core-surface-10-color);display:table-row;vertical-align:inherit;width:100%;outline:none;text-align:inherit}:host slot{vertical-align:inherit;text-align:inherit}:host([align="left"]){text-align:left}:host([align="center"]){text-align:center}:host([align="right"]){text-align:right}:host([valign="top"]){vertical-align:top}:host([valign="middle"]){vertical-align:middle}:host([valign="bottom"]){vertical-align:bottom}:host([header]) .market-table-v2-cell,:host([header]) ::slotted(.market-table-v2-cell),:host([footer]) .market-table-v2-cell,:host([footer]) ::slotted(.market-table-v2-cell){font-weight:var(--table-cell-heading-font-weight)}:host([header]) .market-drag-handle,:host([footer]) .market-drag-handle{visibility:hidden}:host([header]) .market-table-v2-cell,:host([header]) ::slotted(.market-table-v2-cell),:host([sticky="top"]) .market-table-v2-cell,:host([sticky="top"]) ::slotted(.market-table-v2-cell){border-bottom:var(--table-cell-border-width) solid var(--table-cell-heading-border-color)}:host([footer]) .market-table-v2-cell,:host([footer]) ::slotted(.market-table-v2-cell),:host([sticky="bottom"]) .market-table-v2-cell,:host([sticky="bottom"]) ::slotted(.market-table-v2-cell){border-top:var(--table-cell-border-width) solid var(--table-cell-heading-border-color);border-bottom:none}:host([sticky]){position:sticky;z-index:3;background-color:var(--table-cell-state-normal-background-color)}:host([sticky="top"]){top:0}:host([sticky="bottom"]){bottom:0}:host([interactive]){cursor:pointer}@media (hover: hover){:host([interactive]:hover){background-color:var(--table-cell-hover-state-background-color)}}:host([interactive]:focus){background-color:var(--table-cell-focus-state-background-color)}:host([active]),:host([interactive]:active){background-color:var(--table-cell-pressed-state-background-color)}:host([disabled]){color:var(--table-cell-disabled-state-text-color);pointer-events:none}.drag-handle-cell{width:var(--core-metrics-spacing-500)}@media (hover: hover){:host([drag-handle-visibility="hover"]) .market-drag-handle{opacity:0%}:host([drag-handle-visibility="hover"]:hover) .market-drag-handle{opacity:100%}}:host(.market-drag-placeholder),:host(.market-drag-placeholder[interactive]){background-color:var(--core-fill-50-color)}:host(.market-drag-placeholder) *,:host(.market-drag-placeholder) ::slotted(*),:host(.market-drag-placeholder[interactive]) *,:host(.market-drag-placeholder[interactive]) ::slotted(*){opacity:0%}:host(.market-drag-placeholder) .market-drag-handle,:host(.market-drag-placeholder[interactive]) .market-drag-handle{pointer-events:none}:host(.market-drag-clone),:host(.market-drag-clone[interactive]){--table-row-dragged-width:240px;display:flex;justify-content:space-between;align-items:center;width:var(--table-row-dragged-width);border-bottom:var(--table-cell-border-width) solid var(--table-cell-border-color);border-radius:var(--core-radius-10);background-color:var(--core-surface-20-color);cursor:grabbing;transition-timing-function:var(--core-animation-move-transition-easing);transition-duration:var(--core-animation-move-transition-moderate-speed-duration);transition-property:top, width, height}:host(.market-drag-clone)::after,:host(.market-drag-clone[interactive])::after{content:"";position:absolute;inset:0;display:block;border-radius:var(--core-radius-10);box-shadow:var(--elevation-20-shadow);opacity:var(--market-drag-clone-shadow-opacity, 0%);transition-timing-function:var(--core-animation-move-transition-easing);transition-duration:var(--core-animation-move-transition-moderate-speed-duration);transition-property:opacity}:host(.market-drag-clone) .market-drag-handle,:host(.market-drag-clone[interactive]) .market-drag-handle{cursor:grabbing}:host(.market-drag-clone) ::slotted(.market-table-v2-cell:first-child),:host(.market-drag-clone[interactive]) ::slotted(.market-table-v2-cell:first-child){overflow:hidden;width:100%;border:none;text-overflow:ellipsis;white-space:nowrap;transition-timing-function:var(--core-animation-move-transition-easing);transition-duration:var(--core-animation-move-transition-moderate-speed-duration);transition-property:padding-left}:host(.market-drag-clone) ::slotted(.market-table-v2-cell:not(:first-child)),:host(.market-drag-clone[interactive]) ::slotted(.market-table-v2-cell:not(:first-child)){display:none}:host(.market-drag-clone) .drag-handle-cell,:host(.market-drag-clone[interactive]) .drag-handle-cell{border:none}:host(.market-drag-clone[drag-handle-position="leading"]){justify-content:flex-start}:host(.market-drag-released){pointer-events:none;transition-property:opacity, width, height, transform, scale}:host(.market-drag-into-collapsed-group){opacity:0%;scale:0}',b=m,k=class{constructor(e){c(this,e),this.marketInternalTableV2RowSelectionChange=s(this,"marketInternalTableV2RowSelectionChange",7),this.marketTableV2RowSelectionChange=s(this,"marketTableV2RowSelectionChange",7),this.active=!1,this.align=void 0,this.caret=void 0,this.disabled=!1,this.dragEnabled=!1,this.dragHandleVisibility=void 0,this.dragHandlePosition=void 0,this.footer=!1,this.header=!1,this.indent=void 0,this.interactive=!1,this.selected="false",this.sticky=void 0,this.valign=void 0}onKeydown(e){const{target:t,key:a}=e,{el:r,disabled:i,interactive:o}=this;i||o&&t===r&&(a==="Enter"||a===" ")&&(e.preventDefault(),r.click())}async onMarketInternalTableV2CellSelectionChange(e){const{detail:t}=e,{current:a}=t;e.stopPropagation(),await this.setSelected(a)}async onDragStart(e){const{el:t,dragHandlePosition:a}=this;if(t.slot==="parent")return;e.stopPropagation();const r=e.detail,i=a==="leading"?"left":"right",o=new v(t,{anchor:i});this.drag=o,await o.start(r)}onDragMove(e){if(this.el.slot==="parent")return;e.stopPropagation();const t=e.detail;this.drag.move(t)}async onDragEnd(e){if(this.el.slot==="parent")return;e.stopPropagation();const t=e.detail;await this.drag.end(t),this.drag.destroy()}watchCaret(){const{firstCell:e,caret:t}=this;e&&(e.caret=t)}watchIndent(){const{firstCell:e,indent:t}=this;e&&(e.indent=t)}async setSelected(e,{silent:t=!1}={}){const{firstCell:a,selected:r,marketTableV2RowSelectionChange:i,marketInternalTableV2RowSelectionChange:o}=this;if(r===e)return Promise.resolve();const{defaultPrevented:d}=i.emit({current:e,previous:r});return d?(await(a==null?void 0:a.setSelected(r,{silent:!0})),Promise.resolve()):(t||o.emit({current:e,previous:r}),this.selected=e,await(a==null?void 0:a.setSelected(e,{silent:t})),Promise.resolve())}getTabIndex(){const{disabled:e,interactive:t}=this;return t&&!e?"0":null}async initFirstCell(){const{el:e,selected:t}=this,a=n("market-table-v2-cell"),r=e.querySelector(`${a}`);r&&(this.firstCell=r,t&&await(r==null?void 0:r.setSelected(t))),this.watchCaret(),this.watchIndent()}async connectedCallBack(){await this.initFirstCell()}renderDragHandleCell(){const e=n("market-drag-handle"),t=n("market-table-v2-cell");return l(t,{class:"drag-handle-cell"},l(e,{part:"drag-handle"}))}render(){const{dragEnabled:e,dragHandlePosition:t}=this;return l(h,{key:"3f8ebc79243556b6c425b7e5f1df6bd273ea55b3",role:"row",class:"market-table-v2-row",tabindex:this.getTabIndex(),onMarketDragHandleDragStart:a=>this.onDragStart(a),onMarketDragHandleDragMove:a=>this.onDragMove(a),onMarketDragHandleDragEnd:a=>this.onDragEnd(a)},e&&t==="leading"&&this.renderDragHandleCell(),l("slot",{key:"cd73548185f384edcf7c4e2ebe95c42a03e330ff",onSlotchange:()=>this.initFirstCell()}),e&&t!=="leading"&&this.renderDragHandleCell())}get el(){return g(this)}static get watchers(){return{caret:["watchCaret"],indent:["watchIndent"]}}};k.style=b;export{k as market_table_v2_row};
