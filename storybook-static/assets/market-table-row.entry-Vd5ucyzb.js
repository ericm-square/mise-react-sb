import{r as b,c as n,h as r,H as f,g as p}from"./preview-BLkU8-7b.js";import{g as i}from"./index-2dc281eb-DCayfYZh.js";import"./jsx-runtime-qGIIFXMu.js";import"./index-CDs2tPxN.js";import"./iframe-BYgjunmg.js";import"../sb-preview/runtime.js";import"./tslib.es6-pJfR_DrR.js";const u=`:host{--transition-duration:0.2s;position:relative;display:grid;grid-column:1 / -1;grid-auto-columns:1fr;grid-auto-flow:column;border-bottom:var(--table-border-width, 1px) solid var(--table-row-border-color, var(--core-divider-20-color));transition:background-color var(--transition-duration)}@media (hover: hover){:host{}:host([interactive]:hover) ::slotted(.market-table-cell){background-color:var(--table-cell-hover-state-background-color, var(--core-fill-50-color))}}:host([header]){border-bottom:var(--table-border-width, 1px) solid var(--table-heading-border-color, var(--core-divider-10-color))}:host([footer]) ::slotted(.market-table-cell){border-bottom:none;font-weight:var(--table-footing-primary-text-font-weight, 500);font-size:var(--table-footing-primary-text-font-size, var(--core-type-semibold-20-size));line-height:var(--table-footing-primary-text-line-height, var(--core-type-semibold-20-leading))}:host([interactive]) ::slotted(.market-table-cell){cursor:pointer}:host([active]) ::slotted(.market-table-cell),:host([interactive]:active) ::slotted(.market-table-cell){background-color:var(--table-cell-pressed-state-background-color, var(--core-emphasis-40-color))}:host([interactive]:focus){outline:none;}:host([interactive]:not([disabled]):focus) ::slotted(.market-table-cell){background-color:var(--table-cell-focus-state-background-color, var(--core-fill-50-color))}:host([interactive][disabled]){pointer-events:none}:host([disabled]) ::slotted(.market-table-cell){background-color:transparent;color:var(--table-cell-disabled-state-text-color, var(--core-text-30-color));pointer-events:none}:host([nested]) ::slotted(.market-table-cell:first-of-type){padding-left:calc(
        (
          var(--cell-indent-level) *
          var(--table-row-indentation-padding, 40px)
        ) +
        var(--table-cell-padding, 8px) +
        var(--table-accordion-content-width, 30px)
      )}:host([slot='custom-trigger']) ::slotted(.market-table-cell:first-of-type),:host([slot='header']) ::slotted(.market-table-cell:first-of-type),:host([slot='footer']) ::slotted(.market-table-cell:first-of-type){padding-left:var(--table-cell-padding, 8px)}:host ::slotted(.market-table-cell:first-of-type){padding-left:calc(
      var(--table-cell-padding, 8px) +
      (var(--cell-indent-level) * var(--table-row-indentation-padding, 40px))
    )}`,k=u,v=class{constructor(e){b(this,e),this.marketTableHeaderLoaded=n(this,"marketTableHeaderLoaded",7),this.marketTableRowClicked=n(this,"marketTableRowClicked",7),this.marketTableRowStick=n(this,"marketTableRowStick",7),this.marketTableRowUnstick=n(this,"marketTableRowUnstick",7),this.marketAccordionToggled=n(this,"marketAccordionToggled",7),this.marketNestedRowToggled=n(this,"marketNestedRowToggled",7),this.componentLoaded=!1,this.leadingIndentation=0,this.stickTo=!1,this.sticky=void 0,this.active=!1,this.interactive=!1,this.disabled=!1,this.selected=!1,this.header=!1,this.footer=!1,this.originalSlot=void 0,this.index=0,this.tableColumns=void 0,this.cells=void 0,this.gridTemplateMain=[],this.gridTemplateLeft=[],this.gridTemplateRight=[],this.expanded=!1,this.nested=!1,this.styleDeclaration=void 0,this.gridTemplate=[],this.nestedRowToggleButton=void 0}formNewGridTemplate(){this.gridTemplate=[...this.gridTemplateLeft,...this.gridTemplateMain,...this.gridTemplateRight],this.tableAreaLeft&&(this.tableAreaLeft.placement=[1,this.gridTemplateLeft.length]),this.tableAreaMain&&(this.tableAreaMain.placement=[this.gridTemplateLeft.length+1,this.gridTemplateMain.length]),this.tableAreaRight&&(this.tableAreaRight.placement=[this.gridTemplateLeft.length+this.gridTemplateMain.length+1,this.gridTemplateRight.length])}gridTemplateObserver(e,t){e!==t&&(this.el.style.gridTemplateColumns=e.join(" "))}stickyObserver(e,t){e!==t&&this.emitStickyEvents()}columnsObserver(e){this.setCellColumnProperties(e)}updateCellProperties(e,t){e!==t&&this.setCellColumnProperties(this.tableColumns)}updateFirstCellProperties(){this._setFirstCellProperties()}updateNestedRowButton(){if(this.nestedRowToggleButton){this.nestedRowToggleButton.ariaExpanded=`${this.expanded}`;const e=this.nestedRowToggleButton.querySelector("svg");e&&(this.expanded?e.style.transform="rotate(-180deg)":e.style.transform="rotate(0deg)")}}updateSlottedControlCheckedValue(){var e;(e=this.slottedControl)===null||e===void 0||e.setSelection(this.selected)}updateSlottedControlDisabledValue(){var e;(e=this.slottedControl)===null||e===void 0||e.setDisabled(this.disabled)}handleMarketCheckboxValueChange(e){e.target===this.slottedControl&&(this.selected=e.detail.current)}stick(e){return e?this.stickTo=e:(this.header||this.footer)&&(this.sticky=!0),Promise.resolve()}unstick(){return this.sticky=!1,this.stickTo=!1,Promise.resolve()}async _stickColumn(e,t){const l=this.el.querySelector(`[name="${e}"], [column="${e}"]`);l?await l._stickSelf(t):console.warn("cannot stick cell to unknown position")}async _unstickColumn(e){const t=this.el.querySelector(`[name="${e}"], [column="${e}"]`);t?await t._unstickSelf():console.warn("cannot unstick cell from unknown position")}_syncColumnVisibilityWithCells(e,t){const l=this.el.querySelector(`[name="${e}"], [column="${e}"]`);return l&&(l.hidden=t),Promise.resolve()}_setFirstCellProperties(){var e,t,l;return!((e=this.cells)===null||e===void 0)&&e.length&&this.isStylableCell(this.cells[0])&&((l=(t=this.cells[0])._updateFirstCellProperties)===null||l===void 0||l.call(t,this.el)),Promise.resolve()}setLeadingIndentation(e){return this.leadingIndentation=e,Promise.resolve()}toggleNestedRow(){return this.expanded=!this.expanded,this.marketAccordionToggled.emit({expanded:this.expanded}),this.marketNestedRowToggled.emit({expanded:this.expanded}),Promise.resolve()}isStylableCell(e){return e._updateColumnRelatedProperties!==void 0&&e._updateFirstCellProperties!==void 0}setCellColumnProperties(e){this.cells&&e&&e.length>0&&this.cells.forEach((t,l)=>{if(this.isStylableCell(t)){const o=e[l];t._updateColumnRelatedProperties(o)}})}emitStickyEvents(){let e;this.stickTo?e=this.stickTo:this.header?e="top":this.footer&&(e="bottom"),this.sticky||this.stickTo?this.marketTableRowStick.emit({position:e,index:this.index}):this.componentLoaded&&this.marketTableRowUnstick.emit({position:e,index:this.index})}componentWillLoad(){this.originalSlot=this.el.slot,this.header=this.originalSlot==="header",this.footer=this.originalSlot==="footer",this.cells=this.el.querySelectorAll(i("market-table-cell"))}handleSlotChange(){this.cells=this.el.querySelectorAll(`${i("market-table-cell")}, ${i("market-table-column")}`),this.header&&this.marketTableHeaderLoaded.emit({columns:this.el.querySelectorAll(i("market-table-column"))}),this.emitStickyEvents()}_getMarketRowElement(e){return e.querySelector(i("market-table-row"))}_addCaretButtonToFirstCell(){this.cells&&this.cells[0]&&(this.nestedRowToggleButton=document.createElement("button"),Object.assign(this.nestedRowToggleButton,{slot:"nested-row-indicator",type:"button",ariaExpanded:`${this.expanded}`,onclick:()=>this.toggleNestedRow()}),this.nestedRowToggleButton.innerHTML=`<svg class="caret" width="14" height="8" viewBox="0 0 14 8" fill="none" style="transition-duration:300ms;" xmlns="http://www.w3.org/2000/svg">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M7.70715 7.70711C7.31663 8.09763 6.68346 8.09763 6.29294 7.70711L0.29294 1.70711L1.70715 0.292892L7.00005 5.58579L12.2929 0.292893L13.7072 1.70711L7.70715 7.70711Z"
            fill="currentColor"
          />
        </svg>`,this.cells[0].append(this.nestedRowToggleButton))}_registerSlottedControl(){this.slottedControl=this.el.querySelector([`[slot="control"] ${i("market-checkbox")}`,`[slot="control"] ${i("market-toggle")}`].join(",")),this.slottedControl&&(this.slottedControl.setDisabled(this.disabled),this.slottedControl.setSelection(this.selected))}componentDidRender(){var e,t;const l=this.el.closest(i("market-accordion-item"));if(l){let o;if(this.el.slot==="custom-trigger"){const a=(e=l.parentElement)===null||e===void 0?void 0:e.closest(i("market-accordion-item"));a&&(o=[...a.children].find(d=>d.slot==="custom-trigger"))}else o=[...l.children].find(a=>a.slot==="custom-trigger");this.leadingIndentation=o?((t=o.leadingIndentation)!==null&&t!==void 0?t:0)+1:0}this._setFirstCellProperties()}componentDidLoad(){if(this.componentLoaded=!0,this.el.slot==="custom-trigger"){this._addCaretButtonToFirstCell();const e=this.nestedRowToggleButton.querySelector("svg");e&&this.expanded&&(e.style.transform="rotate(-180deg)")}}handleClick(e){[i("market-accessory"),i("market-button"),i("market-checkbox"),i("market-link"),i("market-toggle"),"button","a"].some(o=>e.target.closest(o))||this.interactive&&this.marketTableRowClicked.emit()}handleKeydown(e){if(e.target===this.el)switch(e.key){case"Enter":this.handleClick(e);break;case" ":this.handleClick(e),e.preventDefault();break}}render(){const{disabled:e,footer:t,gridTemplateLeft:l,gridTemplateMain:o,gridTemplateRight:a,header:d,interactive:h,selected:m,slottedControl:g}=this,c=i("market-table-area");return r(f,{key:"cae0c1bd0eebddb383e59564c41f09fd0a010840","aria-selected":g?(!!m).toString():null,class:"market-table-row",role:"row",tabindex:h&&!e?"0":null,header:d,footer:t,onClick:s=>this.handleClick(s),onKeydown:s=>this.handleKeydown(s)},r(c,{key:"8984e50a27cce084f5e05552610eab3fc06b57cb",orientation:"vertical","stick-to":"left",gridTemplate:l,ref:s=>this.tableAreaLeft=s},r("slot",{key:"4106b0fd44b3b7b29bcb608394f89572aa269156",name:"sticky-left"})),r(c,{key:"bbd6483746b3d3247c3abf3a0f89cf935d95a9db",orientation:"vertical",gridTemplate:o,ref:s=>this.tableAreaMain=s,active:!0},r("slot",{key:"183fe912660d547f525af881193f27fa60a05d6a",name:"control",onSlotchange:()=>this._registerSlottedControl()}),r("slot",{key:"d8691acca4b6a1fe8cc20464a25b20382c7a7b8a",onSlotchange:()=>this.handleSlotChange()})),r(c,{key:"a2515d57d72ff85caca07bc28a1d334723363f72",orientation:"vertical","stick-to":"right",gridTemplate:a,ref:s=>this.tableAreaRight=s},r("slot",{key:"e4f402d2a324d54425f632cc41e8ada7e749b422",name:"sticky-right"})))}get el(){return p(this)}static get watchers(){return{gridTemplateMain:["formNewGridTemplate"],gridTemplateLeft:["formNewGridTemplate"],gridTemplateRight:["formNewGridTemplate"],gridTemplate:["gridTemplateObserver"],stickTo:["stickyObserver"],sticky:["stickyObserver"],tableColumns:["columnsObserver"],cells:["updateCellProperties"],leadingIndentation:["updateFirstCellProperties"],expanded:["updateNestedRowButton"],selected:["updateSlottedControlCheckedValue"],disabled:["updateSlottedControlDisabledValue"]}}};v.style=k;export{v as market_table_row};
