.form-checkbox__options {
    display: flex;
    flex-flow: column;
    gap: var(--space);
}

.form-checkbox[data-t-variant="row"][data-divider] .form-checkbox__options {
    padding-top: var(--space-x2);
}

.form-checkbox__option {
    position: relative;
    display: flex;
    gap: var(--space-x2);
    align-items: center;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
}

.form-checkbox[data-t-variant="normal"][data-divider] .form-checkbox__option,
.form-checkbox[data-t-variant="row"][data-divider] .form-checkbox__option {
    padding-bottom: var(--space);
    border-bottom: 1px solid var(--theme-divider-20);
    transition: border-color 0.1s ease;
}

.form-checkbox[data-t-variant="row"][data-divider] .form-checkbox__option {
    padding-bottom: var(--space-x2);
}

.form-checkbox[data-t-variant="normal"][data-divider]:not(.form-checkbox--single) .form-checkbox__option:last-of-type,
.form-checkbox[data-t-variant="row"][data-divider]:not(.form-checkbox--single) .form-checkbox__option:last-of-type {
    border-bottom: none;
}

.form-checkbox[data-t-variant="normal"][data-divider]:not(.form-checkbox--single) .form-checkbox__option:last-of-type {
    padding-bottom: 0;
}

.form-checkbox__input {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--space-x2_5);
    height: var(--space-x2_5);
    margin: 2px 0 0;
    vertical-align: middle;
    cursor: pointer;
    background-color: transparent;
    border: 2px solid var(--theme-fill-20);
    border-radius: 4px;
    transition: border-color 0.2s ease, background-color 0.2s ease;
}

.form-checkbox__input:checked {
    background-color: var(--theme-emphasis-fill);
    border-color: var(--theme-emphasis-fill);
}

.form-checkbox__input:disabled {
    background-color: var(--theme-fill-50);
    border-color: var(--theme-fill-30);
}

.form-checkbox[data-t-variant="row"] .form-checkbox__input {
    position: relative;
    margin: 0;
}

.form-checkbox[data-t-align="right"] .form-checkbox__input {
    order: 2;
}

.form-checkbox--invalid .form-checkbox__input:not(:disabled) {
    border-color: var(--theme-critical-fill);
}

.form-checkbox--invalid .form-checkbox__input:checked {
    background-color: var(--theme-critical-fill);
}

.form-checkbox__option--disabled,
.form-checkbox__input[disabled] {
    cursor: not-allowed;
}

.form-checkbox__input:not([disabled], :checked):hover {
    border-color: var(--theme-emphasis-fill);
}

.form-checkbox__input:not([disabled], :checked):active {
    border-color: var(--theme-emphasis-10);
}

.form-checkbox__input:checked[disabled] {
    background-color: var(--theme-fill-20);
    border-color: transparent;
}

/* check icon */
.form-checkbox__input::after {
    position: relative;
    top: calc(var(--space) * -0.2);
    display: block;
    width: calc(var(--space-x2_5) / 2 * 0.7);
    height: calc(var(--space-x2_5) / 2);
    content: "";
    border-right: 2px solid var(--theme-fill-inverse-solid);
    border-bottom: 2px solid var(--theme-fill-inverse-solid);
    opacity: 0;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.form-checkbox__input:checked::after {
    opacity: 1;
    transform: rotate(45deg);
}

/* dash icon */
.form-checkbox__input[indeterminate]:not(:checked)::after {
    top: 0;
    width: calc(var(--space-x2_5) / 2 * 0.9);
    height: 2px;
    border-color: var(--theme-emphasis-fill);
    border-right: 0;
    opacity: 1;
}

.form-checkbox__input[indeterminate]:disabled::after {
    border-color: var(--theme-fill-30);
}

.form-checkbox--invalid .form-checkbox__input[indeterminate]:not(:disabled, :checked)::after {
    border-color: var(--theme-critical-fill);
}

/* image */
.form-checkbox__input-image {
    position: relative;
    overflow: hidden;
    border: 1px solid var(--theme-fill-40);
    border-radius: var(--theme-border-radius-image);
}

.form-checkbox[data-t-variant="normal"]:not([data-t-align="right"]) .form-checkbox__input-image {
    order: 1;
}

.form-checkbox__input-image img {
    width: var(--space-x6);
    height: var(--space-x6);
    object-fit: cover;
}

/* row variant */
.form-checkbox[data-t-variant="row"] .form-checkbox__input:not([indeterminate])::after {
    border-color: transparent;
    transition: transform 0.3s ease;
}

.form-checkbox[data-t-variant="row"] .form-checkbox__input:checked::after {
    border-color: var(--theme-fill-inverse-solid);
}

/* stylelint-disable-next-line no-descending-specificity */
.form-checkbox[data-t-variant="row"] .form-checkbox__options {
    gap: var(--space-x2);
}

.form-checkbox[data-t-variant="row"] .form-checkbox__option:hover .form-checkbox__input:not(:checked, [indeterminate])::after {
    border-color: var(--theme-fill-40);
}

.form-checkbox[data-t-variant="row"] .form-checkbox__option::before {
    position: absolute;
    top: calc(var(--space-half) * -1);
    left: calc(var(--space-x1_5) * -1);
    display: block;
    width: calc(100% + calc(var(--space-x1_5) * 2));
    height: calc(100% + calc(var(--space-half) * 2));
    content: '';
    background-color: var(--theme-emphasis-40);
    border-radius: var(--theme-border-radius-input-medium-inner);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.form-checkbox[data-t-variant="row"][data-divider] .form-checkbox__option::before {
    top: calc(var(--space-x2) * -1);
    height: calc(100% + calc(var(--space) * 2));
}

.form-checkbox[data-t-variant="row"] .form-checkbox__options-collapse {
    margin-right: calc(var(--space-x1_5) * -1);
    margin-left: calc(var(--space-x1_5) * -1);
}

.form-checkbox[data-t-variant="row"] .form-checkbox__options-collapse .form-checkbox__options {
    margin: var(--space-half) var(--space-x1_5);
}

/* Only non-mobile devices, where hover is supported, should have hover states */
@media (hover: hover) {
    .form-checkbox[data-t-variant="row"] .form-checkbox__option:hover::before {
        opacity: 1;
    }

    /* stylelint-disable-next-line no-descending-specificity */
    .form-checkbox[data-t-variant="row"][data-divider] .form-checkbox__option:hover,
    .form-checkbox__option--hide-divider.form-checkbox__option {
        border-color: transparent;
    }
}

.form-checkbox__input-side-label,
.form-checkbox__input-labels {
    font-size: var(--theme-font-size-minus-1);
    line-height: var(--theme-font-size-minus-1-line-height);
    color: var(--theme-label-color);
}

.form-checkbox__input-labels {
    display: flex;
    flex-flow: column;
}

.form-checkbox[data-t-variant="row"] .form-checkbox__input-labels {
    position: relative;
    flex: 1;
}

.form-checkbox[data-t-variant="normal"]:not([data-t-align="right"]) .form-checkbox__input-labels {
    order: 2;
}

.form-checkbox__input-sublabel {
    color: var(--theme-text-20);
}

/* size */
/* stylelint-disable-next-line no-descending-specificity */
.form-checkbox[t-size="large"] .form-checkbox__input-side-label,
.form-checkbox[t-size="large"] .form-checkbox__input-labels {
    font-size: var(--theme-font-size-base);
    font-weight: var(--theme-font-weight-light);
    line-height: var(--theme-line-height-base);
}

/* alignment */
/* stylelint-disable-next-line no-descending-specificity */
.form-checkbox[data-t-align="right"] .form-checkbox__input-labels {
    flex: 1;
    order: 1;
}
